<html>
  <head>
    <style type="text/css">
      #container {
    	height: 100vh;
    	max-width: 100vw;
        margin: auto;
      }
    </style>
  </head>
  <body>
  <div id="container"></div>
  <script src="templates/libraries/sigma/build/sigma.min.js"></script>
  <script src="templates/libraries/sigma/build/plugins/sigma.layout.forceAtlas2.min.js"></script>
  <script src="templates/libraries/sigma/build/plugins/sigma.parsers.json.min.js"></script>
    <script>
      
      var g_data = JSON.parse('{{data|safe}}')
      s = new sigma({ 
              graph: g_data,
              container: 'container',
              settings: {
                  defaultNodeColor: '#ec5148'
              }
      });

      position(s);
      function position(s) {
        // this is needed in case the original JSON doesn't have color / size / x-y attributes 
        console.log('about to position all nodes')
        var i,
    
        nodes = s.graph.nodes(),
        len = nodes.length;
        
        for (i = 0; i < len; i++) {
          nodes[i].x = Math.random();
          nodes[i].y = Math.random();
          //nodes[i].size = s.graph.degree(nodes[i].id);
          nodes[i].size = 10;
          nodes[i].color = '#333';
        }
        
        // Refresh the display:
        s.refresh();
        
        // ForceAtlas Layout
        s.startForceAtlas2({worker: true, barnesHutOptimize: false, background: true, autoStop: true});
        // ForceAtlas Layout
    	s.stopForceAtlas2();
      }
    
    </script>
  </body>
</html>
